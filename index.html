<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–æ—è</title>
  <link href="https://fonts.googleapis.com/css2?family=Century+Gothic&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Century Gothic', sans-serif;
      background-color: #f2f2f2;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .calculator {
      background-color: white;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 600px;
      text-align: center;
      animation: fadeIn 0.6s ease-out;
    }

    h2 {
      font-size: 2rem;
      color: #579e21;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    .value-control {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 10px;
    }

    .value-control button {
      padding: 8px 12px;
      margin: 0 5px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      background-color: #579e21;
      color: white;
      transition: background-color 0.3s ease;
    }

    .value-control button:hover {
      background-color: #4a8e1c;
    }

    .value-display {
      padding: 8px 12px;
      margin: 0 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      text-align: center;
      width: 50px;
    }

    button.calculate {
      margin-top: 20px;
      padding: 12px 20px;
      background-color: #579e21;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    button.calculate:hover {
      background-color: #4a8e1c;
    }

    .result {
      margin-top: 25px;
      padding: 15px;
      border-radius: 8px;
      font-size: 1rem;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s forwards;
    }

    .win {
      background-color: #eaffec;
      color: #2b691d;
    }

    .lose {
      background-color: #ffeaea;
      color: #570600;
    }

    .draw {
      background-color: #fff8dc;
      color: #666;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .damage-flash {
      animation: flash 0.3s ease-in-out;
    }

    @keyframes flash {
      0% { background-color: transparent; }
      50% { background-color: #ffdddd; }
      100% { background-color: transparent; }
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 600px) {
      .calculator {
        padding: 20px;
        max-width: 90%;
      }

      .value-display {
        width: 40px;
      }

      button.calculate {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<div class="calculator">
  <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–æ—è</h2>
  <form id="battleForm">
    <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ò–≥—Ä–æ–∫–∞:</h3>
    <div class="value-control">
      <label>–°–ò–õ–ê:</label>
      <button onclick="updateValue('playerStr', -1)">-</button>
      <span class="value-display" id="playerStrDisplay">8</span>
      <button onclick="updateValue('playerStr', 1)">+</button>
    </div>
    <div class="value-control">
      <label>–ó–ê–©–ò–¢–ê:</label>
      <button onclick="updateValue('playerDef', -1)">-</button>
      <span class="value-display" id="playerDefDisplay">10</span>
      <button onclick="updateValue('playerDef', 1)">+</button>
    </div>
    <div class="value-control">
      <label>–ò–ù–ò–¶–ò–ê–¢–ò–í–ê:</label>
      <button onclick="updateValue('playerInit', -1)">-</button>
      <span class="value-display" id="playerInitDisplay">10</span>
      <button onclick="updateValue('playerInit', 1)">+</button>
    </div>

    <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:</h3>
    <div class="value-control">
      <label>–°–ò–õ–ê:</label>
      <button onclick="updateValue('enemyStr', -1)">-</button>
      <span class="value-display" id="enemyStrDisplay">11</span>
      <button onclick="updateValue('enemyStr', 1)">+</button>
    </div>
    <div class="value-control">
      <label>–ó–ê–©–ò–¢–ê:</label>
      <button onclick="updateValue('enemyDef', -1)">-</button>
      <span class="value-display" id="enemyDefDisplay">7</span>
      <button onclick="updateValue('enemyDef', 1)">+</button>
    </div>
    <div class="value-control">
      <label>–ò–ù–ò–¶–ò–ê–¢–ò–í–ê:</label>
      <button onclick="updateValue('enemyInit', -1)">-</button>
      <span class="value-display" id="enemyInitDisplay">9</span>
      <button onclick="updateValue('enemyInit', 1)">+</button>
    </div>

    <div class="value-control">
      <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ê–¢–ê–ö:</label>
      <button onclick="updateValue('rounds', -1)">-</button>
      <span class="value-display" id="roundsDisplay">4</span>
      <button onclick="updateValue('rounds', 1)">+</button>
    </div>

    <button type="button" class="calculate" onclick="simulateBattle()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –±–æ–π</button>
  </form>

  <div class="result" id="result" style="display:none;"></div>
</div>

<script>
  // –•—Ä–∞–Ω–∏–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
  let player = {
    —Å–∏–ª–∞: 8,
    –∑–∞—â–∏—Ç–∞: 10,
    –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞: 10
  };

  let enemy = {
    —Å–∏–ª–∞: 11,
    –∑–∞—â–∏—Ç–∞: 7,
    –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞: 9
  };

  let rounds = 4;

  // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
  function updateValue(key, delta) {
    if (key === 'playerStr') {
      player.—Å–∏–ª–∞ = Math.max(0, player.—Å–∏–ª–∞ + delta);
      document.getElementById('playerStrDisplay').innerText = player.—Å–∏–ª–∞;
    } else if (key === 'playerDef') {
      player.–∑–∞—â–∏—Ç–∞ = Math.max(0, player.–∑–∞—â–∏—Ç–∞ + delta);
      document.getElementById('playerDefDisplay').innerText = player.–∑–∞—â–∏—Ç–∞;
    } else if (key === 'playerInit') {
      player.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ = Math.max(0, player.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ + delta);
      document.getElementById('playerInitDisplay').innerText = player.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞;
    } else if (key === 'enemyStr') {
      enemy.—Å–∏–ª–∞ = Math.max(0, enemy.—Å–∏–ª–∞ + delta);
      document.getElementById('enemyStrDisplay').innerText = enemy.—Å–∏–ª–∞;
    } else if (key === 'enemyDef') {
      enemy.–∑–∞—â–∏—Ç–∞ = Math.max(0, enemy.–∑–∞—â–∏—Ç–∞ + delta);
      document.getElementById('enemyDefDisplay').innerText = enemy.–∑–∞—â–∏—Ç–∞;
    } else if (key === 'enemyInit') {
      enemy.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ = Math.max(0, enemy.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ + delta);
      document.getElementById('enemyInitDisplay').innerText = enemy.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞;
    } else if (key === 'rounds') {
      rounds = Math.max(1, rounds + delta); // –ú–∏–Ω–∏–º—É–º 1 –∞—Ç–∞–∫–∞
      document.getElementById('roundsDisplay').innerText = rounds;
    }
  }

  function attack(attacker, defender) {
    const damage = attacker.—Å–∏–ª–∞;

    if (defender.–∑–∞—â–∏—Ç–∞ > 0) {
      defender.–∑–∞—â–∏—Ç–∞ -= damage;
      if (defender.–∑–∞—â–∏—Ç–∞ < 0) {
        defender.—Å–∏–ª–∞ += defender.–∑–∞—â–∏—Ç–∞;
        defender.–∑–∞—â–∏—Ç–∞ = 0;
      }
    } else {
      defender.—Å–∏–ª–∞ -= damage;
    }

    return defender;
  }

  function simulateBattle() {
    // –ö–æ–ø–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤
    let p = JSON.parse(JSON.stringify(player));
    let e = JSON.parse(JSON.stringify(enemy));

    let winner = null;
    let playerAttacks = 0;
    let enemyAttacks = 0;

    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫—Ç–æ —Ö–æ–¥–∏—Ç –ø–µ—Ä–≤—ã–º
    let first = p.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ >= e.–∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ ? "player" : "enemy";

    for (let i = 0; i < rounds; i++) {
      // –ê—Ç–∞–∫–∞ –∏–≥—Ä–æ–∫–∞
      if (p.—Å–∏–ª–∞ > 0) {
        e = attack(p, e);
        playerAttacks++;
        if (e.—Å–∏–ª–∞ <= 0) {
          winner = "–ò–≥—Ä–æ–∫";
          break;
        }
      }

      // –ê—Ç–∞–∫–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
      if (e.—Å–∏–ª–∞ > 0) {
        p = attack(e, p);
        enemyAttacks++;
        if (p.—Å–∏–ª–∞ <= 0) {
          winner = "–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫";
          break;
        }
      }
    }

    const resultDiv = document.getElementById('result');
    resultDiv.style.display = 'block';
    resultDiv.classList.remove("win", "lose", "draw", "damage-flash");
    resultDiv.style.opacity = 0;

    setTimeout(() => {
      resultDiv.style.opacity = 1;
    }, 10);

    let resultText = `<strong>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ ${playerAttacks} –∞—Ç–∞–∫ –ò–≥—Ä–æ–∫–∞ –∏ ${enemyAttacks} –∞—Ç–∞–∫ –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:</strong><br>`;
    resultText += `–ò–≥—Ä–æ–∫: –°–ò–õ–ê ‚Äî ${p.—Å–∏–ª–∞}, –ó–ê–©–ò–¢–ê ‚Äî ${p.–∑–∞—â–∏—Ç–∞}<br>`;
    resultText += `–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫: –°–ò–õ–ê ‚Äî ${e.—Å–∏–ª–∞}, –ó–ê–©–ò–¢–ê ‚Äî ${e.–∑–∞—â–∏—Ç–∞}<br><br>`;

    if (winner === "–ò–≥—Ä–æ–∫") {
      resultText += "üéâ –í—ã –ø–æ–±–µ–¥–∏–ª–∏!";
      resultDiv.classList.add("win");
    } else if (winner === "–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫") {
      resultText += "üí• –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.";
      resultDiv.classList.add("lose");
    } else {
      resultText += "ü§ù –ù–∏—á—å—è.";
      resultDiv.classList.add("draw");
    }

    resultDiv.innerHTML = resultText;
    resultDiv.classList.add("damage-flash");
  }
</script>

</body>
</html>
